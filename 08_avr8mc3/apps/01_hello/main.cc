#include <stdio.cc>
#include <avr8k/graphics.cc>

graphics D;
stdio io;

const byte SAND[128] PROGMEM = {
    0xE6, 0xEE, 0xE6, 0xEE, 0xEE, 0xEE, 0xEE, 0xE6,
    0xEE, 0xEE, 0x6E, 0xE6, 0xEE, 0xE6, 0xEE, 0xEE,
    0xEE, 0xEE, 0xE6, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
    0xEE, 0xE6, 0xEE, 0xEE, 0xE6, 0xEE, 0xEE, 0xEE,
    0xEE, 0xEE, 0x6E, 0xEE, 0xE6, 0xEE, 0xEE, 0xEE,
    0xE6, 0xEE, 0xEE, 0xEE, 0x6E, 0xE6, 0xEE, 0xE6,
    0xEE, 0xEE, 0xE6, 0xE6, 0xE6, 0xEE, 0xEE, 0xEE,
    0xEE, 0xE6, 0xEE, 0xEE, 0xEE, 0xE6, 0xEE, 0xEE,
    0xEE, 0xEE, 0x6E, 0xEE, 0xE6, 0xEE, 0xE6, 0xEE,
    0xEE, 0xEE, 0xEE, 0x6E, 0xEE, 0xE6, 0xEE, 0xEE,
    0xEE, 0xEE, 0xEE, 0xEE, 0xE6, 0xEE, 0xEE, 0xEE,
    0xEE, 0xEE, 0xE6, 0xEE, 0xEE, 0xE6, 0xEE, 0xEE,
    0xE6, 0xEE, 0x6E, 0xE6, 0xEE, 0xEE, 0x6E, 0xEE,
    0xEE, 0xEE, 0xEE, 0xEE, 0xE6, 0xEE, 0xEE, 0xEE,
    0xEE, 0xEE, 0xE6, 0xEE, 0xEE, 0xE6, 0xEE, 0xE6,
    0xEE, 0xEE, 0xEE, 0xEE, 0xE6, 0xEE, 0xEE, 0xEE
};

// Спрайт Марио 16x16 (4x16)
const byte MARIO[64] PROGMEM = {

    0x00, 0x2a, 0xa8, 0x00, 0x00, 0xaa, 0xaa, 0xa0,
    0x00, 0x55, 0xf7, 0x00, 0x01, 0x77, 0xf7, 0xf0,
    0x01, 0x75, 0xfd, 0xfc, 0x01, 0x5f, 0xf5, 0x50,
    0x00, 0x3f, 0xff, 0xc0, 0x00, 0x56, 0x54, 0x00,
    0x01, 0x56, 0x59, 0x50, 0x05, 0x56, 0xa9, 0x54,
    0x0f, 0xdb, 0xae, 0x7c, 0x0f, 0xfa, 0xaa, 0xfc,
    0x0f, 0xea, 0xaa, 0xbc, 0x00, 0xaa, 0x2a, 0x80,
    0x01, 0x54, 0x05, 0x50, 0x05, 0x54, 0x05, 0x54,
};

int main() {

    D.cls(1);

    for (int i = 8; i < 12; i++)
    for (int j = 0; j < 20; j++)
        D.tile(SAND, j*16, i*16, 16, 16);

    // Человече
    D.line(160, 103, 165, 112, 11);
    D.line(160, 100, 160, 115, 11);
    D.line(160, 103, 155, 112, 11);
    D.line(160, 115, 165, 127, 11);
    D.line(160, 115, 155, 127, 11);
    D.circlef(160, 100, 3, 11);

    D.circlef(230, 30, 10, 14);
    D.lineb(1,1,318,198,7);
    D.lineb(3,3,316,196,7);

    D.color(15, 1);
    D.locate(8, 8);
    D.print("Hello, World! CAXAPA Support only English for compact progmem size... ");

    for(;;) {

        D.locate(8, 16);
        D.print(io.timer());
        D.print("    ");
    }
}
